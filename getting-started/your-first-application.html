<!doctype html>
<html>
	<head>
		<title>Your First Application -  Getting Started -  Watson Documentation</title>
		<link rel="stylesheet" type="text/css" href="/watson/assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="/watson/assets/css/pygments.css" />
		<meta name="viewport" content="initial-scale=1, user-scalable=no, width=device-width" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	</head>
	<body>
		<a href="https://github.com/simoncoulton/watson"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
<header>
	<nav class="wrapper primary">
		<a href="/watson/">Watson<span>It's elementary my dear Watson</span></a>
		<a href="/watson/reference-library">Reference Library</a>
		<a href="/watson/key-concepts">Key Concepts</a>
		<a href="/watson/getting-started">Getting Started</a>
	</nav>
	<div class="pagetitle">
		<div class="wrapper">Documentation: Getting Started</div>
	</div>
</header>
		<div>
			<div class="wrapper main clearfix">
				<nav class="secondary">
	<ul>
		<li>
			Getting Started
			<ul>
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/getting-started/installation.html">
			          Installation
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/getting-started/configuration.html">
			          Configuration
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li class="active">
			        <a href="/watson/getting-started/your-first-application.html">
			          Your First Application
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Key Concepts
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/events.html">
			          Events
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/dependencyinjection.html">
			          Dependency Injection
			        </a>
			      </li>
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/mvc.html">
			          Mvc
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Common Usage
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/controllers.html">
			          Controllers
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/views.html">
			          Views
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/routing.html">
			          Routing
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/requests.html">
			          Requests
			        </a>
			      </li>
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/forms.html">
			          Forms
			        </a>
			      </li>
			    
			  
			</ul>
		</li>
		<li>
			Advanced Topics
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/advanced-topics/deployment.html">
			          Deployment
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Reference Library
			<ul>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/cache">watson.cache</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/common">watson.common</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/di">watson.di</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/events">watson.events</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/filters">watson.filters</a>
				</li>
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/form">watson.form</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/html">watson.html</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/http">watson.http</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/mvc">watson.mvc</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/util">watson.util</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/validators">watson.validators</a>
				</li>
				
				
				
				
			</ul>
		</li>
	</ul>
</nav>
			    <div class="content">
			    	<h2 class="section-title">Your First Application</h2>
					<p><section></p>

<ul>
<li><a href="#directory-structure">Directory Structure</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#putting-it-all-together">Putting it all together</a></li>
</ul>

<h3 id="toc_0"><a id="directory-structure"></a>Directory Structure</h3>

<p>Watson has a preferred directory structure for it&#39;s applications which can be created automatically by the <code>watson-console.py newproject [project name] [app name]</code> command.</p>
<div class="highlight"><pre><code class="text">/project_root
    /app_name
        /config
            config.py
            dev.py.dist
            prod.py.dist
            routes.py
        /controllers
        /views
            /layouts
        app.py
    /data
        /cache
        /logs
        /uploads
    /public
        /css
        /img
        /js
    /tests
    console.py
</code></pre></div>
<blockquote>
<p>For example <strong>watson-console.py newproject sample.com.local sample</strong> creates a new project named sample.com.local and an application package named sample</p>
</blockquote>

<p>The application will be created within the current working directory, unless you override it with the <code>-d DIR</code> option.</p>

<p>Once the structure has been created, you can use <code>./console.py</code> to perform related console commands from within the application, for example: <code>./console.py routes</code> to display a list of routes for the application.</p>

<h3 id="toc_1"><a id="configuration"></a>Configuration</h3>

<p>By creating your project using the <strong>newproject</strong> command Watson will generate 3 configuration files for your application as well as a route file.</p>

<ol>
<li>config.py</li>
<li>dev.py.dist</li>
<li>prod.py.dist</li>
<li>routes.py</li>
</ol>

<p><em>config.py</em> is the basic configuration to get your application up and running locally and is identical to <em>dev.py.dist</em>. By default <em>dev.py.dist</em> will enable profiling and debugging of the application.
If you have retrieved the application from a VCS then you would make a copy of <em>dev.py.dist</em> with the name <em>config.py</em> and modify the settings within there.</p>

<p><span class="sub">app/config/config.py</span></p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">project.config.routes</span> <span class="kn">import</span> <span class="n">routes</span>

<span class="n">debug</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;enabled&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">&#39;profiling&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;enabled&#39;</span><span class="p">:</span> <span class="bp">True</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>When deploying to a production environment you would make a copy of <em>prod.py.dist</em> and name it <em>config.py</em> to load the relevant production settings.</p>

<p>The dist files are designed to maintain a consistent configuration when an application is being worked on by multiple developers. We recommend adding <em>[app_name]/config/config.py</em> to your .gitignore file to prevent your personal configuration from being used by another developer.</p>

<p><em>routes.py</em> contains all the routes associated with the application. For more detail on how to define routes, please see the <a href="/watson/key-concepts/mvc.html#routing">Mvc Key Concept</a> area.</p>

<p><span class="sub">app/config/routes.py</span></p>

<div class="highlight"><pre><code class="python"><span class="n">routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;index&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;/&#39;</span><span class="p">,</span>
        <span class="s">&#39;defaults&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;controller&#39;</span><span class="p">:</span> <span class="s">&#39;project.controllers.Index&#39;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="toc_2"><a id="putting-it-all-together"></a>Putting it all together</h3>

<p>Most likely you&#39;ll want to develop locally first and then <a href="/watson/advanced-topics/deployment.html">deploy to a production environment</a> later. Watson comes packaged with a command to run a local development server which will automatically reload when changes are saved. To run the server simply change to the project directory and run <code>./console.py rundev</code> and then visit <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a> in your favorite browser where you&#39;ll be greeted with a page saying welcome to Watson.</p>

<p>A initial controller is created for you in <em>app_name/controllers/index.py</em> which will response to a request for / in your browser (from the above routes.py definition)</p>

<p><span class="sub">app/controllers/index.py</span></p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">watson</span> <span class="kn">import</span> <span class="n">__version__</span>
<span class="kn">from</span> <span class="nn">watson.mvc</span> <span class="kn">import</span> <span class="n">controllers</span>

<span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">Rest</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Welcome to Watson v{0}!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">__version__</span><span class="p">)</span>
</code></pre></div>

<p>Being a Rest controller any request will be routed to the instance method matching the HTTP_REQUEST_METHOD environ variable from the associated request. One of the benefits of using a Rest controller is that you no longer need to check the request method to determine how you should respond.</p>

<p>An alternative would be to use an Action controller instead. This would be represented in the following way:</p>

<div class="highlight"><pre><code class="python"><span class="kn">from</span> <span class="nn">watson</span> <span class="kn">import</span> <span class="n">__version__</span>
<span class="kn">from</span> <span class="nn">watson.mvc</span> <span class="kn">import</span> <span class="n">controllers</span>

<span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">controllers</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">index_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Welcome to Watson v{0}!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">__version__</span><span class="p">)</span>
</code></pre></div>

<p>All Action controller methods are suffixed with _action. For a more indepth look at what functions a controller can perform, check out the <a href="/watson/common-usage/controllers.html">Common Usage area</a> for controllers. For a general overview of how controllers are used within Watson, check out the <a href="/watson/key-concepts/mvc.html#controllers">Mvc Key Concept</a> area.</p>

<p>The presentation layer (or view) is matched based on lowercased versions of the the class name and action of the controller. For the above request the following view is rendered:</p>

<p><span class="sub">app/views/index/get.html</span></p>

<div class="highlight"><pre><code class="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Welcome to Watson!<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>{{ content }}<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span>You are now on your way to creating your first application using Watson.<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>Read more about Watson in <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://simoncoulton.github.io/watson/&quot;</span><span class="nt">&gt;</span>the documentation.<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>

<p>For more information on views, check out the <a href="/watson/key-concepts/mvc.html#views">Mvc Key Concept</a> area.</p>

<p>You will also want to make sure that you unit test your application, and you can do that by running <code>./console.py runtests</code>. A simple unit test is already included when the <strong>newproject</strong> command is run. It is designed to fail so make sure you go in and make the required changes for it to pass!</p>

<p>All tests are located under the <em>tests</em> directory. For example the demo unit test is located at <em>tests/[app name]/controllers/test_index.py</em>.</p>

<p>Watson supports both <a href="https://nose.readthedocs.org/en/latest/">nose</a> and <a href="http://pytest.org/latest/">py.test</a> for use with the <em>runtests</em> command.</p>

<p></section></p>

				</div>
			</div>
		</div>
		<footer>
	<div class="sub">
		<div class="wrapper clearfix">
			<ul>
				<li class="title">Source </li>
				<li><a href="https://github.com/simoncoulton/watson">GitHub</a></li>
				<li><a href="https://pypi.python.org/pypi/watson-framework/">Pypi</a></li>
			</ul>
			<ul>
				<li class="title">Testing</li>
				<li><a href="https://coveralls.io/r/simoncoulton/watson">Coverage</a></li>
				<li><a href="https://travis-ci.org/simoncoulton/watson">Travis CI</a></li>
			</ul>
			<ul>
				<li class="title">Useful Resources</li>
				<li><a href="http://docs.python.org/3/">Python 3 Documentation</a></li>
				<li><a href="http://www.reddit.com/r/python">Python Subreddit</a></li>

			</ul>
		</div>
	</div>
	<div class="wrapper">
		Design thanks to <a href="http://www.blazrobar.com">Blaz Robar</a>
		<br />Content generated by <a href="https://github.com/mojombo/jekyll">Jekyll</a>
	</div>
</footer>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	  var pageTracker = _gat._getTracker("UA-37744723-1");
	pageTracker._trackPageview();
	} catch(err) {}
</script>


	</body>
</html>
