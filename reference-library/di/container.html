<!doctype html>
<html>
	<head>
		<title>Container -  Reference Library -  Watson Documentation</title>
		<link rel="stylesheet" type="text/css" href="/watson/assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="/watson/assets/css/pygments.css" />
		<meta name="viewport" content="initial-scale=1, user-scalable=no, width=device-width" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	</head>
	<body>
		<a href="https://github.com/simoncoulton/watson"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
<header>
	<nav class="wrapper primary">
		<a href="/watson/">Watson<span>It's elementary my dear Watson</span></a>
		<a href="/watson/reference-library">Reference Library</a>
		<a href="/watson/key-concepts">Key Concepts</a>
		<a href="/watson/getting-started">Getting Started</a>
	</nav>
	<div class="pagetitle">
		<div class="wrapper">Documentation: Reference Library</div>
	</div>
</header>
		<div>
			<div class="wrapper main clearfix">
				<nav class="secondary">
	<ul>
		<li>
			Getting Started
			<ul>
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/getting-started/installation.html">
			          Installation
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/getting-started/configuration.html">
			          Configuration
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/getting-started/your-first-application.html">
			          Your First Application
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Key Concepts
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/events.html">
			          Events
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/dependencyinjection.html">
			          Dependency Injection
			        </a>
			      </li>
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/key-concepts/mvc.html">
			          Mvc
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Common Usage
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/controllers.html">
			          Controllers
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/views.html">
			          Views
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/routing.html">
			          Routing
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/requests.html">
			          Requests
			        </a>
			      </li>
			    
			  
			    
			      <li>
			        <a href="/watson/common-usage/forms.html">
			          Forms
			        </a>
			      </li>
			    
			  
			</ul>
		</li>
		<li>
			Advanced Topics
			<ul>
				
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			      <li>
			        <a href="/watson/advanced-topics/deployment.html">
			          Deployment
			        </a>
			      </li>
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			    
			  
			</ul>
		</li>
		<li>
			Reference Library
			<ul>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/cache">watson.cache</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/common">watson.common</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li class="active">
					<a href="/watson/reference-library/di">watson.di</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/events">watson.events</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/filters">watson.filters</a>
				</li>
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/form">watson.form</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/html">watson.html</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/http">watson.http</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/mvc">watson.mvc</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/util">watson.util</a>
				</li>
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				<li>
					<a href="/watson/reference-library/validators">watson.validators</a>
				</li>
				
				
				
				
			</ul>
		</li>
	</ul>
</nav>
			    <div class="content">
			    	<h2 class="section-title">watson.di.container</h2>
					<section class="standout">
	<dl>
		<dt>Package</dt>
		<dd>watson.di</dd>
	</dl>
</section>
<section class="code">
<h3 id="toc_0">IocContainer</h3>

<blockquote>
<p>A simple dependency injection container that can store and retrieve dependencies for an application.</p>
</blockquote>

<p>The container is configured via a dict containing the following keys:<br /></p>

<ul>
<li><strong>params</strong>: a dict of data that can be injected into a dependency.<br />
    If the value of the key is the same as the name of another dependency then the dependency will be referenced.<br /></li>
<li><strong>definitions</strong>: a dict of definitions that are to be loaded by the container.<br />
Available keys within a definition are:<br />
    - item: The qualified name of a class or function<br />
    - type: singleton (only load the dependency once) or prototype (instantiate and return a new dependency on each request)<br />
    - init: a list or dict of items to be injected into the dependency on instantiation.<br />
    - setter: a list or dict of methods to be called upon instantiation.
    - property:
Only &#39;item&#39; is a required key.<br /></li>
<li><strong>processors</strong>: a dict of events to be listened for and processors to be called.</li>
</ul>

<h4 id="toc_1">Attributes</h4>

<table><thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dict</td>
<td>config</td>
<td>A dict containing the definitions, params and processors.</td>
</tr>
<tr>
<td>dict</td>
<td>__instantiated</td>
<td>A cache of already instantiated dependencies.</td>
</tr>
</tbody></table>

<h4 id="toc_2">Usage</h4>

<div class="highlight"><pre><code class="python"><span class="n">container</span> <span class="o">=</span> <span class="n">IocContainer</span><span class="p">({</span>
    <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;db.host&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span>
    <span class="p">},</span>
    <span class="s">&#39;definitions&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;database&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;item&#39;</span><span class="p">:</span> <span class="s">&#39;db.adapters.MySQL&#39;</span>
            <span class="s">&#39;init&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;host&#39;</span><span class="p">:</span> <span class="s">&#39;db.host&#39;</span><span class="p">,</span>
                <span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="s">&#39;simon&#39;</span><span class="p">,</span>
                <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span>
                <span class="s">&#39;db&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;database&#39;</span><span class="p">)</span>  <span class="c"># an instance of db.adapters.MySQL</span>
</code></pre></div>

<h4 id="toc_3">Properties</h4>

<h5 id="toc_4">params</h5>

<p>Convenience method for retrieving the params.</p>

<h6 id="toc_5">Returns</h6>

<p>A dict of params.</p>

<h5 id="toc_6">definitions</h5>

<p>Convenience method for retrieving the definitions.</p>

<h6 id="toc_7">Returns</h6>

<p>A dict of definitions.</p>

<h6 id="toc_8">Usage</h6>

<div class="highlight"><pre><code class="python"><span class="n">Resolver</span><span class="p">(</span><span class="s">&#39;watson&#39;</span><span class="p">)</span>
</code></pre></div>

<h4 id="toc_9">Methods</h4>

<h5 id="toc_10">__init__(config=None)</h5>

<p>Initializes the container and set some default configuration options.</p>

<h6 id="toc_11">Arguments</h6>

<table><thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dict</td>
<td>config</td>
<td>A dict containing the params, definitions and processors.</td>
</tr>
</tbody></table>

<h5 id="toc_12">get(name)</h5>

<p>Retrieve a dependency from the container.</p>

<h6 id="toc_13">Arguments</h6>

<table><thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>string</td>
<td>name</td>
<td>The name of the dependency to retrieve.</td>
</tr>
</tbody></table>

<h6 id="toc_14">Raises</h6>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>KeyError</td>
<td>If the definition or item within the definition are not specified.</td>
</tr>
</tbody></table>

<h6 id="toc_15">Returns</h6>

<p>mixed: The dependency</p>

<h5 id="toc_16">add(name, item, type=&#39;singleton&#39;)</h5>

<p>Add a dependency to the container (either already instatiated or not).</p>

<h6 id="toc_17">Arguments</h6>

<table><thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>string</td>
<td>name</td>
<td>The name used to reference the dependency</td>
</tr>
<tr>
<td>mixed</td>
<td>item</td>
<td>The dependency to add (either qualified name or instance)</td>
</tr>
</tbody></table>

<h5 id="toc_18">attach_processor(event, processor)</h5>

<p>Attaches a processor to the container that will be triggered on a specific
        event.</p>

<h6 id="toc_19">Arguments</h6>

<table><thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>string</td>
<td>event</td>
<td>The name of the event (watson.di.container.POST_EVENT or PRE_EVENT)</td>
</tr>
<tr>
<td>watson.di.processors.BaseProcessor</td>
<td>processor</td>
<td>The processor to attach.</td>
</tr>
</tbody></table>

</section>

<section>
	
	
	
		
		
			
		
	
		
			
		
		
	

	
	<h4>See also:</h4>
	
	
	<a class="label blue" href="/watson/reference-library/di/processors.html">watson.di.processors</a>
	
	
	
	
	
	
	
	
	

	
	<h4 class="key-concepts">Key Concepts:</h4>
	
	
	
	
	<a class="label yellow" href="/watson/key-concepts/dependencyinjection.html">Dependency Injection</a>
	
	
	
</section>

				</div>
			</div>
		</div>
		<footer>
	<div class="sub">
		<div class="wrapper clearfix">
			<ul>
				<li class="title">Source </li>
				<li><a href="https://github.com/simoncoulton/watson">GitHub</a></li>
				<li><a href="https://pypi.python.org/pypi/watson-framework/">Pypi</a></li>
			</ul>
			<ul>
				<li class="title">Testing</li>
				<li><a href="https://coveralls.io/r/simoncoulton/watson">Coverage</a></li>
				<li><a href="https://travis-ci.org/simoncoulton/watson">Travis CI</a></li>
			</ul>
			<ul>
				<li class="title">Useful Resources</li>
				<li><a href="http://docs.python.org/3/">Python 3 Documentation</a></li>
				<li><a href="http://www.reddit.com/r/python">Python Subreddit</a></li>

			</ul>
		</div>
	</div>
	<div class="wrapper">
		Design thanks to <a href="http://www.blazrobar.com">Blaz Robar</a>
		<br />Content generated by <a href="https://github.com/mojombo/jekyll">Jekyll</a>
	</div>
</footer>

<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	  var pageTracker = _gat._getTracker("UA-37744723-1");
	pageTracker._trackPageview();
	} catch(err) {}
</script>


	</body>
</html>
